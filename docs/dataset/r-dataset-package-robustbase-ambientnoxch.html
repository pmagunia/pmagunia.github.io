<!DOCTYPE HTML> <html lang="en"><head> <meta charset="utf-8"> <link rel="stylesheet" href="/assets/css/main.css"> <link rel="stylesheet" href="/assets/css/fontello/css/pmagunia.min.css"> <link rel="stylesheet" href="/assets/css/rouge.min.css"> <meta name="viewport" content="width=device-width, initial-scale=1"> <meta name="robots" content="index, follow"> <link rel="canonical" href="https://pmagunia.com/dataset/r-dataset-package-robustbase-ambientnoxch"> <title>R Dataset / Package robustbase / ambientNOxCH | On Things | Parag's Web</title> <meta name="description" content="On this R-data statistics page, you will find information about the ambientNOxCH data set which pertains to Daily Means of NOx (mono-nitrogen oxides) in air...."> <meta name="author" content="Parag Magunia"> <script async src="/assets/js/main.min.js"></script> <link href="https://unpkg.com/gridjs/dist/theme/mermaid.min.css" rel="stylesheet"> </head> <body> <div id="headerToggle"><a href="#" class="toggle" onclick="menuToggle()" title="Open Menu"><span class="icon icon-menu"></span></a></div><div id="header"> <div class="top"><div id="logo"> <a href="https://pmagunia.com/" id="home-link"> <span class="image avatar48"><img loading="lazy" src="/assets/images/pmagunia_favicon.webp" height="55.33px" width="38.67px" alt="Avatar of Parag Magunia"></span> <h2 id="title">On Things</h2> <p>Parag's Web</p> </a> </div> <nav id="nav"> <ul> <li class="home"> <a href="https://pmagunia.com/" id="home-link-id"><span class="icon icon-home">Home</span></a> </li><li class="contact"> <a href="https://pmagunia.com/contact.html" id="contact-link-id"><span class="icon icon-mail">Contact</span></a> </li><li class="real-analysis"> <a href="https://pmagunia.com/real-analysis.html" id="real-analysis-link-id"><span class="icon icon-infinity">Real Analysis</span></a> </li><li class="statistics"> <a href="https://pmagunia.com/statistics.html" id="statistics-link-id"><span class="icon icon-chart-bar">Statistics</span></a> </li><li class="technology"> <a href="https://pmagunia.com/technology.html" id="technology-link-id"><span class="icon icon-desktop">Technology</span></a> </li><li class="arithmetic"> <a href="https://pmagunia.com/arithmetic.html" id="arithmetic-link-id"><span class="icon icon-chart-pie">Arithmetic</span></a> </li><li class="datasets"> <a href="https://pmagunia.com/datasets.html" id="datasets-link-id"><span class="icon icon-database">Datasets</span></a> </li><li class="spirituality"> <a href="https://pmagunia.com/spirituality.html" id="spirituality-link-id"><span class="icon icon-leaf">Spirituality</span></a> </li></ul> </nav> </div> <div class="bottom"><ul class="icons"> <li><a href="https://drupal.org/u/pmagunia" class="icon icon-drupal" title="Drupal"><span class="label">Drupal</span></a></li> <li><a href="https://twitter.com/pmagunia" class="icon icon-twitter" title="Twitter"><span class="label">Twitter</span></a></li> <li><a href="https://www.linkedin.com/in/pmagunia" class="icon icon-linkedin-squared" title="LinkedIn"><span class="label">LinkedIn</span></a></li> <li><a href="https://github.com/pmagunia" class="icon icon-github-circled" title="Github"><span class="label">GitHub</span></a></li> <li><a href="https://www.upwork.com/freelancers/~015b1032d2938319a8?viewMode=1" class="icon upwork" title="Upwork">$<span class="label">Upwork</span></a></li> <li><a href="https://soundcloud.com/pmagunia" class="icon icon-soundcloud" title="SoundCloud"><span class="label">SoundCloud</span></a></li> <li><a href="https://stackoverflow.com/users/312471/pmagunia" class="icon icon-stackoverflow" title="StackOverflow"><span class="label">StackOverflow</span></a></li> </ul> </div> </div> <div id="main"> <article class="shade-two"> <div class="container"> <br> <header> <h1>R Dataset / Package robustbase / ambientNOxCH</h1> </header> <p>November 27, 2023</p><div id="dataset-info"> <p>On this R-data statistics page, you will find information about the <span class="mono">ambientNOxCH</span> data set which pertains to Daily Means of NOx (mono-nitrogen oxides) in air. The <span class="mono">ambientNOxCH</span> data set is found in the <span class="mono">robustbase</span> R package. You can load the <span class="mono">ambientNOxCH</span> data set in R by issuing the following command at the console <span class="mono">data("ambientNOxCH")</span>. This will load the data into a variable called <span class="mono">ambientNOxCH</span>. If R says the <span class="mono">ambientNOxCH</span> data set is not found, you can try installing the package by issuing this command <span class="mono">install.packages("robustbase")</span> and then attempt to reload the data with the <span class="mono">library()</span> command. If you need to download R, you can go to the <a href="https://www.r-project.org">R project website</a>. You can download a CSV (comma separated values) version of the <span class="mono"><a href="../assets/data/csv/dataset-76142.csv">ambientNOxCH R data set</a></span>. The size of this file is about 80,224 bytes.</p><h2>Daily Means of NOx (mono-nitrogen oxides) in air</h2> <h3>Description</h3> <p>This dataset contains daily means (from midnight to midnight) of NOx, i.e., mono-nitrogen oxides, in [ppb] at 13 sites in central Switzerland and Aarau for the year 2004.</p> <h3>Usage</h3> <pre>data(ambientNOxCH)</pre> <h3>Format</h3> <p>A data frame with 366 observations on the following 14 variables.</p> <dl> <dt><code>date</code></dt> <dd> <p>date of day, of class <code>"Date"</code>.</p> </dd> <dt><code>ad</code></dt> <dd> <p>Site is located north of Altdorf 100 meters east of motorway A2, on an open field at the beginning of a more than 2000m deep valley (690.175, 193.55; 438; inLuft)</p> </dd> <dt><code>ba</code></dt> <dd> <p>Site is located in the centre of the little town of Baden in a residential area. Baden has 34'000 inhabitants and is situated on the swiss plateau (666.075, 257.972; 377; inLuft).</p> </dd> <dt><code>ef</code></dt> <dd> <p>Site is located 6 km south of altdorf and 800 m north of the village of Erstfeld. The motorway A2 passes 5 m west of the measuring site. Over 8 million vehicles have passed Erstfeld in 2004 where 13% of the counts were attributed to trucks (691.43, 187.69; 457; MFM-U).</p> </dd> <dt><code>la</code></dt> <dd> <p>Site is located on a wooded hill in a rural area called Laegern, about 190 m above Baden, which is about 5 km away (669.8, 259; 690; NABEL).</p> </dd> <dt><code>lu</code></dt> <dd> <p>Site is located in the center of town of Lucerne, which has 57'000 inhabitants (666.19, 211.975; 460; inLuft).</p> </dd> <dt><code>re</code></dt> <dd> <p>Site is located 1 km west of Reiden on the Swiss plateau. The motorway A2 passes 5 m west of the measuring site (639.56, 232.11; 462; MFM-U).</p> </dd> <dt><code>ri</code></dt> <dd> <p>Site is located at Rigi Seebodenalp, 649 m above the lake of Lucerne on an alp with half a dozen small houses (677.9, 213.5; 1030; NABEL).</p> </dd> <dt><code>se</code></dt> <dd> <p>Site is located in Sedel next to town of Lucerne 35m above and 250m south of motorway A14 from Zug to Lucerne on a low hill with free 360Â° panorama (665.5, 213.41; 484; inLuft).</p> </dd> <dt><code>si</code></dt> <dd> <p>Site is located at the border of a small industrial area in Sisseln, 300 m east of a main road (640.725, 266.25; 305; inLuft).</p> </dd> <dt><code>st</code></dt> <dd> <p>Site is located at the south east border of Stans with 7'000 inhabitants (670.85, 201.025; 438; inLuft).</p> </dd> <dt><code>su</code></dt> <dd> <p>Site is located in the center of Suhr (8700 inhabitants), 10 m from the main road (648.49, 246.985; 403; inLuft).</p> </dd> <dt><code>sz</code></dt> <dd> <p>Site is located in Schwyz (14'200 inhabitants) near a shopping center (691.92, 208.03; 470; inLuft).</p> </dd> <dt><code>zg</code></dt> <dd> <p>Site is located in the centre of Zug with 22'000 inhabitants, 24 m from the main road (681.625, 224.625; 420; inLuft).</p> </dd> </dl> <h3>Details</h3> <p>The 13 sites are part of one of the three air quality monitoring networks: inLuft (regional authorities of central Switzerland and canton Aargau)NABEL (Swiss federal network)MFM-U (Monitoring flankierende Massnahmen Umwelt), special Swiss federal network along transit motorways A2 and A13 from Germany to Italy through SwitzerlandThe information within the brackets means: Swiss coordinates km east, km north; m above sea level; network</p> <p>When the measuring sites are exposed to the same atmospheric condition and when there is no singular emission event at any site, <code>log(mean(NOx) of a specific day at each site)</code> is a linear function of <code>log(yearly.mean(NOx) at the corresponding site)</code>. The offset and the slope of the straight line reflects the atmospheric conditions at this specific day. During winter time, often an inversion prevents the emissions from being diluted vertically, so that there evolve two separate atmospheric compartements: One below the inversion boundary with polluted air and one above with relatively clean air. In our example below, Rigi Seebodenalp is above the inversion boundary between December 10th and 12th.</p> <h3>Source</h3> <p><a href="http://www.in-luft.ch/">http://www.in-luft.ch/</a><a href="http://www.empa.ch/plugin/template/empa/*/6794">http://www.empa.ch/plugin/template/empa/*/6794</a><a href="http://www.bafu.admin.ch/umweltbeobachtung/02272/02280">http://www.bafu.admin.ch/umweltbeobachtung/02272/02280</a></p> <h3>See Also</h3> <p>another NOx dataset, <code>NOxEmissions</code>.</p> <h3>Examples</h3> <pre>
data(ambientNOxCH)
str (ambientNOxCH)yearly &lt;- log(colMeans(ambientNOxCH[,-1], na.rm=TRUE))
xlim &lt;- range(yearly)
lNOx &lt;- log(ambientNOxCH[, -1])
days &lt;- ambientNOxCH[, "date"]## Subset of 9 days starting at April 4:
idays &lt;- seq(which(ambientNOxCH$date=="2004-12-04"), length=9)
ylim &lt;- range(lNOx[idays,],na.rm=TRUE)
op &lt;- par(mfrow=c(3,3),mar=rep(1,4), oma = c(0,0,2,0))for (id in idays) {
daily &lt;- unlist(lNOx[id,])
plot(NA, xlim=xlim,ylim=ylim, ann=FALSE, type = "n")
abline(0:1, col="light gray")
abline(lmrob(daily~yearly, na.action=na.exclude),
 col="red", lwd=2)
text(yearly, daily, names(yearly), col="blue")
mtext(days[id], side=1, line=-1.2, cex=.75, adj=.98)
}
mtext("Daily ~ Yearlylog( NOx mean values ) at 13 Swiss locations",
outer=TRUE)
par(op)## do all 366 regressions:Least Squares and Robust:
LS &lt;- lapply(1:nrow(ambientNOxCH), function(id)
 lm(unlist(lNOx[id,]) ~ yearly,
na.action = na.exclude))
R &lt;- lapply(1:nrow(ambientNOxCH),
function(id) lmrob(unlist(lNOx[id,]) ~ yearly,
 na.action = na.exclude))
## currently 4 warnings about non-convergence;
## which ones?
days[notOk &lt;- ! sapply(R, `[[`, "converged") ]
## "2004-01-10" "2004-05-12" "2004-05-16" "2004-11-16"## first problematic case:
daily &lt;- unlist(lNOx[which(notOk)[1],])
plot(daily ~ yearly,
 main = paste("lmrob() non-convergent:",days[notOk[1]]))
rr &lt;- lmrob(daily ~ yearly, na.action = na.exclude,
control = lmrob.control(trace=3, max.it = 100))
##-&gt; 53 iter.## Look at all coefficients:
R.cf &lt;- t(sapply(R, coef))
C.cf &lt;- t(sapply(LS, coef))
plot(C.cf, xlim=range(C.cf[,1],R.cf[,1]),
 ylim=range(C.cf[,2],R.cf[,2]))
mD1 &lt;- rowMeans(abs(C.cf - R.cf))
lrg &lt;- mD1 &gt; quantile(mD1, 0.80)
arrows(C.cf[lrg,1], C.cf[lrg,2],
 R.cf[lrg,1], R.cf[lrg,2], length=.1, col="light gray")
points(R.cf, col=2)## All robustness weights
aW &lt;- t(sapply(R, weights, type="robustness"))
colnames(aW) &lt;- names(yearly)
summary(aW)
sort(colSums(aW &lt; 0.05, na.rm = TRUE)) # how often "clear outlier":
# lu st zg ba se sz su si re la ef ad ri
#000111234 10 14 17 48lattice::levelplot(aW, asp=1/2, main="Robustness weights",
 xlab= "day", ylab= "site")
</pre> <p>Dataset imported from <a href="https://www.r-project.org">https://www.r-project.org</a>.</p></div> <p id="dataset-attachments">Attachments: <code><a target="_blank" href="/assets/data/csv/dataset-76142.csv">csv</a></code>, <code><a target="_blank" href="/assets/data/json/dataset-76142.json">json</a></code></p> <div id="dataset-iframe"> <figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;iframe</span> <span class="na">src=</span><span class="s">"https://pmagunia.com/iframe/r-dataset-package-robustbase-ambientnoxch.html"</span> <span class="na">width=</span><span class="s">"100%"</span> <span class="na">height=</span><span class="s">"100%"</span> <span class="na">style=</span><span class="s">"border:0px"</span><span class="nt">&gt;&lt;/iframe&gt;</span></code></pre></figure> </div> <div id="grid"></div> <script>let json_file = 'dataset-76142.json';</script> </div> </article> </div> <div id="footer"> <ul class="copyright"> <li>&copy; Parag Magunia or affialiates <img src="/assets/images/flag.svg" height="16px" width="30px" alt="A photo of the United States Flag" class="my_home"></li> <li><a href="/sitemap.xml">Sitemap</a></li> <li><a href="https://pmagunia.com/2017/01/01/credits.html">Credits</a></li> <li><a href="/2017/01/01/privacy.html">Privacy</a></li> <li><a href="/2017/01/01/terms.html">Terms</a></li> <li><a target="_blank" href="https://pagespeed.web.dev/analysis?url=https%3A%2F%2Fpmagunia.com%2F">Page Speed</a></li> </ul> </div> <script src="https://unpkg.com/gridjs/dist/gridjs.umd.js"></script> <script async src="/assets/js/dataset.min.js"></script> </body> </html>